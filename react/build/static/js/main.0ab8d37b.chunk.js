(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(21)},16:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(8),r=a.n(i),l=(a(16),a(4)),c=a(2),o=a(3),m=a(1),u=function(){return n.a.createElement("div",{className:"Title tc f2 fw6 b"},"Dubstep That Tile")},f=function(){return n.a.createElement("div",{className:"Home"},n.a.createElement(u,null),n.a.createElement("div",{className:"Home__subtitle mt2 tc f3"},"The Ultimate Musical Challenge"),n.a.createElement("ul",{className:"list pl0 tc"},n.a.createElement("li",{className:"pa2 f4 grow hover--2",onClick:function(){J.currentMenu="play"}},"Play"),n.a.createElement("li",{className:"pa2 f4 grow hover--2",onClick:function(){J.currentMenu="options"}},"Options"),n.a.createElement("li",{className:"pa2 f4 grow hover--2",onClick:function(){J.currentMenu="scores"}},"Scores"),n.a.createElement("li",{className:"pa2 f4 grow hover--2",onClick:function(){J.currentMenu="statistics"}},"Statistics"),n.a.createElement("li",{className:"pa2 f4 grow hover--2",onClick:function(){J.currentMenu="about"}},"About")))},h=a(6),d=a(5),v=a(7),p=function(){function e(){Object(c.a)(this,e),this.stats=[];try{this.stats=this.loadStatsFromStorage(),this.username=this.loadUsernameFromStorage()}catch(t){console.log(t)}}return Object(o.a)(e,[{key:"loadStatsFromStorage",value:function(){var e=window.localStorage;return e.stats?JSON.parse(e.stats):{whiteTiles:0,blackTiles:0,gamesPlayed:0,gamesCompleted:0}}},{key:"loadUsernameFromStorage",value:function(){var e=window.localStorage;return e.username?e.username:""}},{key:"saveStatsToStorage",value:function(){window.localStorage.stats=JSON.stringify(this.stats)}},{key:"saveUsernameToStorage",value:function(e){window.localStorage.username=e}}]),e}(),b=window.storage=new p,y=50,E=function(){function e(){Object(c.a)(this,e),this.startTime=0,this.currentTime=0,this.isRunning=!1}return Object(o.a)(e,[{key:"start",value:function(){this.startTime=(new Date).getTime(),this.isRunning=!0,this.measure()}},{key:"measure",value:function(){var e=this;this.isRunning&&(this.currentTime=(new Date).getTime(),setTimeout(function(){return e.measure()},10))}},{key:"stop",value:function(){this.isRunning=!1}},{key:"reset",value:function(){this.startTime=0,this.currentTime=0}},{key:"elapsed",get:function(){return((this.currentTime-this.startTime)/1e3).toFixed(3)}}]),e}();Object(m.g)(E,{currentTime:m.l,startTime:m.l,elapsed:m.d});var g=window.timerStore=new E,w=function(){var e=new Date,t=e.getDate();return e.getMonth()+1+"-"+t+"-"+e.getFullYear()},k=function(){function e(){Object(c.a)(this,e),this.scores=[],this.serverAddress="https://dubstep-that-tile.herokuapp.com"}return Object(o.a)(e,[{key:"fetchScores",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;fetch(this.serverAddress+"/scores?mode="+t).then(function(e){return e.json()}).then(function(t){e.scores=t}).catch(function(e){return console.log(e)})}},{key:"pushScore",value:function(e,t,a,s){""===t&&(t="New User"),fetch(this.serverAddress+"/scores",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:e,username:t,time:a,mode:s})}).then(function(e){return e.json()}).then(function(e){console.log(e)}).catch(function(e){return console.log(e)})}}]),e}();Object(m.g)(k,{scores:m.l});var N=window.scoreStore=new k,O=function(){function e(){Object(c.a)(this,e),this.started=!1,this.won=!1,this.traversed=0,this.modeTiles=y,this.tiles=[],this.tileOffsetY=0,this.username=b.username,this.initializeTiles()}return Object(o.a)(e,[{key:"initializeTiles",value:function(){for(var e=0;e<this.modeTiles+4;e++)for(var t=this.random(1,4),a=!1,s=0,n=0;n<4;n++){s++;var i=1;0===e||e===this.modeTiles-1?i=2:!a&&s===t&&e<this.modeTiles-1&&(i=0,a=!0),this.tiles[n+4*e]=i}}},{key:"random",value:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},{key:"handleClick",value:function(e){console.log(e.target),this.validClick(e.target.id)&&(this.started||(g.start(),this.started=!0),this.mouseCheckWhiteTile(e.target.id)?this.endGame(!1):(this.tileOffsetY++,this.tileOffsetY===this.modeTiles&&this.endGame(!0)))}},{key:"mouseCheckWhiteTile",value:function(e){return!!e.startsWith("white")}},{key:"validClick",value:function(e){return console.log(e),!!(e.includes("12")||e.includes("13")||e.includes("14")||e.includes("15"))}},{key:"handleKeyPress",value:function(e){this.started||(g.start(),this.started=!0),this.keyCheckWhiteTile(e)?this.endGame(!1):(this.tileOffsetY++,this.tileOffsetY===this.modeTiles&&this.endGame(!0))}},{key:"keyCheckWhiteTile",value:function(e){switch(e){case 97:return 1===this.tiles[4*this.tileOffsetY+3];case 115:return 1===this.tiles[4*this.tileOffsetY+2];case 100:return 1===this.tiles[4*this.tileOffsetY+1];case 102:return 1===this.tiles[4*this.tileOffsetY];default:return!1}}},{key:"endGame",value:function(e){g.stop(),J.currentMenu="gameover",e?this.win():this.lose()}},{key:"increaseStats",value:function(e,t){b.stats.gamesPlayed++,b.stats.blackTiles+=t,e?b.stats.gamesCompleted++:b.stats.whiteTiles++}},{key:"win",value:function(){this.increaseStats(!0,this.tileOffsetY),this.won=!0,N.pushScore(w(),this.username,g.elapsed,this.modeTiles)}},{key:"lose",value:function(){this.increaseStats(!1,this.tileOffsetY),this.won=!1}},{key:"reset",value:function(){b.saveStatsToStorage(),g.reset(),this.started=!1,this.won=!1,this.tileOffsetY=0,this.initializeTiles()}},{key:"screenTiles",get:function(){var e=this;return this.tiles.filter(function(t,a){var s=4*e.tileOffsetY,n=4*(e.tileOffsetY+4)-1;return a>=s&&a<=n})}},{key:"tilesPerSecond",get:function(){return(this.tileOffsetY/g.elapsed).toFixed(3)}},{key:"whiteTiles",get:function(){return b.stats.whiteTiles}},{key:"blackTiles",get:function(){return b.stats.blackTiles}},{key:"totalTiles",get:function(){return this.whiteTiles+this.blackTiles}},{key:"totalCompletedGames",get:function(){return b.stats.gamesCompleted}},{key:"totalPlayedGames",get:function(){return b.stats.gamesPlayed}}]),e}();Object(m.g)(O,{modeTiles:m.l,tileOffsetY:m.l,screenTiles:m.d});var _=window.levelStore=new O,T=function(e){var t={svg:{display:"inline-block",verticalAlign:"middle"},rectangle:{fill:e.color,strokeWidth:2,stroke:"#000000"}};return n.a.createElement("svg",{style:t.svg,width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),draggable:!1,viewBox:"0 0 64 128",onClick:e.mouse},n.a.createElement("rect",{id:e.id,width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),style:t.rectangle}))};T.defaultProps={width:64,height:128};var S=T,j=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(o.a)(t,[{key:"renderTiles",value:function(){return _.screenTiles.reverse().map(function(e,t){switch(e){case 1:return n.a.createElement(S,{key:t,id:"white-"+t,color:"white",mouse:function(e){_.handleClick(e)}});case 0:return n.a.createElement(S,{key:t,id:"black-"+t,color:"black",mouse:function(e){_.handleClick(e)}});case 2:return n.a.createElement(S,{key:t,id:"yellow-"+t,color:"yellow",mouse:function(e){_.handleClick(e)}});default:return""}})}},{key:"render",value:function(){return n.a.createElement("div",{className:"Tiles flex flex-wrap",style:{width:"256px",height:"512px"}},this.renderTiles())}}]),t}(s.Component),C=Object(l.a)(j),x=(a(18),function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.input.focus()}},{key:"handleKeyPress",value:function(e){97!==e&&115!==e&&100!==e&&102!==e||_.handleKeyPress(e)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"Play",onKeyPress:function(t){e.handleKeyPress(t.charCode)},tabIndex:"0",ref:function(t){return e.input=t}},n.a.createElement("div",{className:"Play__tiles flex justify-center items-center h-100"},n.a.createElement(C,null)),n.a.createElement("div",{className:"Play__timer"},n.a.createElement("div",{className:"Play__timer-text tr mt2 f3 dark-red"},g.elapsed,"s")))}}]),t}(s.Component)),Y=Object(l.a)(x),M=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(o.a)(t,[{key:"reset",value:function(e){_.reset(),J.currentMenu=e?"play":"home"}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"BackButton flex justify-center",style:this.props.style},n.a.createElement("button",{className:"bg-color--none outline--none bw0 dim f4",onClick:function(){e.reset(e.props.retry)}},this.props.retry?"Retry":"Back"))}}]),t}(s.Component),G=function(){return n.a.createElement("div",{className:"Statistics flex flex-column justify-center"},n.a.createElement("div",{className:"Statistics__title tc f2-ns f3 b mt5"},"Statistics"),n.a.createElement("div",{className:"Statistics__stats flex justify-between"},n.a.createElement("ul",{className:"Statistics__label list p01 dib list--ml0"},n.a.createElement("li",{className:"f4 mb2"},"Total Tiles Traversed"),n.a.createElement("li",{className:"f4 mb2"},"Black Tiles Traversed"),n.a.createElement("li",{className:"f4 mb2"},"White Tiles Tapped"),n.a.createElement("li",{className:"f4 mb2"},"Games Played"),n.a.createElement("li",{className:"f4 mb2"},"Games Completed")),n.a.createElement("ul",{className:"Statistics__stat list p01 dib ml4 tr"},n.a.createElement("li",{className:"f4 b mb2"},_.totalTiles),n.a.createElement("li",{className:"f4 b mb2"},_.blackTiles),n.a.createElement("li",{className:"f4 b mb2"},_.whiteTiles),n.a.createElement("li",{className:"f4 b mb2"},_.totalPlayedGames),n.a.createElement("li",{className:"f4 b mb2"},_.totalCompletedGames))),n.a.createElement(M,{style:{marginTop:"6.5rem"}}))},P=function(e){return n.a.createElement("div",{className:"Score mv2 "+e.class},n.a.createElement("div",{className:"Score__date f4 fl w-third tc"},e.date),n.a.createElement("div",{className:"Score__name f4 fl w-third tc"},e.name),n.a.createElement("div",{className:"Score__time f4 fl w-third tc"},e.time,"s"))},A=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){N.fetchScores()}},{key:"renderScores",value:function(){for(var e=[],t=0;t<N.scores.length;t++){var a=N.scores[t],s=a.username,i=a.date,r=a.time,l="";t%2===1&&(l="bg-color--4"),e.push(n.a.createElement(P,{key:t,class:l,name:s,date:i,time:r}))}return e}},{key:"render",value:function(){return n.a.createElement("div",{className:"Scores",style:{width:"320px"}},n.a.createElement("div",{className:"Scores__title tc f2 b mt5 pr3"},"Scores"),n.a.createElement("div",{style:{overflowY:"scroll",height:"325px",paddingRight:"20px"}},n.a.createElement("div",{className:"Scores__header"},n.a.createElement("div",{className:"Scores__name fl w-third pa2 b f3 tc"},"Date"),n.a.createElement("div",{className:"Score__date fl w-third pa2 b f3 tc"},"Name"),n.a.createElement("div",{className:"Score__time fl w-third pa2 b f3 tc"},"Time"),n.a.createElement("div",{className:"clear"})),this.renderScores()),n.a.createElement("div",{className:"Scores__options pr4"},n.a.createElement("div",{className:"Scores__ten fl w-third pa2 f3 tr",onClick:function(){N.fetchScores(10)}},"10"),n.a.createElement("div",{className:"Score__fifty fl w-third pa2 f3 tc",onClick:function(){N.fetchScores(50)}},"50"),n.a.createElement("div",{className:"Score__thousand fl w-third pa2 f3 tl",onClick:function(){N.fetchScores(1e3)}},"1000"),n.a.createElement("div",{className:"clear"}),n.a.createElement(M,null)))}}]),t}(s.Component),U=Object(l.a)(A),D=(a(19),function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(o.a)(t,[{key:"handleUserChange",value:function(e){_.username=e.target.value,b.saveUsernameToStorage(e.target.value)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"Options",style:{width:"320px"}},n.a.createElement("div",{className:"Options__title tc f2 b mt5"},"Options"),n.a.createElement("ul",{className:"f4 list mt3"},n.a.createElement("li",{className:"Options__select tc"},"Tiles",n.a.createElement("select",{name:"tile-select",className:"ml2 h2 bg-color--black-t1 bn outline--none tlc dropdown-none",value:_.modeTiles,onChange:function(e){_.modeTiles=parseInt(e.target.value)}},n.a.createElement("option",{value:"10"},"10"),n.a.createElement("option",{value:"50"},"50"),n.a.createElement("option",{value:"1000"},"1000"))),n.a.createElement("li",{className:"mode-select color--1a f6 tc"},"How many tiles you will have to traverse to reach the end")),n.a.createElement("div",{className:"Options__username flex justify-center"},"Username ",n.a.createElement("input",{type:"text",className:"Options__field-username ml2 bg-color--black-t1",placeholder:"New User",defaultValue:_.username,onChange:function(t){e.handleUserChange(t)}})),n.a.createElement("div",{className:"Options__username-description color--1a f6 tc"},"The username that will appear on the score menu"),n.a.createElement(M,{style:{marginTop:"6rem"}}))}}]),t}(s.Component)),F=Object(l.a)(D),W=function(){return n.a.createElement("div",{className:"About",style:{width:"320px"}},n.a.createElement(u,null),n.a.createElement("div",{className:"About__instructions pa3"},n.a.createElement("div",{className:"About__instructions-title tc b mb1 f3"},"Instructions"),n.a.createElement("div",{className:"About__instructions-body tc f4"},"Navigate through 50 black tiles using ASDF without stepping on a white tile")),n.a.createElement("div",{className:"About__scoring pa3"},n.a.createElement("div",{className:"About__scoring-title tc b mb1 f3"},"Scoring"),n.a.createElement("div",{className:"About__scoring-body tc f4"},"Your score is determined by how fast you can traverse the tiles")),n.a.createElement("div",{className:"About__copyright pa3"},n.a.createElement("div",{className:"About__copyright-name tc b f4"},"Made by Trey Wallis",n.a.createElement("div",{className:"f5 mt2"},"Contributions by James Reis")),n.a.createElement("div",{className:"About__version mt2 tc f5"},"Version 2.0.0")),n.a.createElement(M,{style:{marginTop:"2rem"}}))},B=function(){return n.a.createElement("div",{className:"GameOver"},n.a.createElement(u,null),_.won?n.a.createElement("div",{className:"GameOver__text"},n.a.createElement("div",{className:"GameOver__first mt5 tc f3-ns f4"},"Congrats"),n.a.createElement("div",{className:"GameOver__second mt3 tc f2-ns f3 b"},g.elapsed,"s"),n.a.createElement("div",{className:"GameOver__third tc f3-ns f4 b"},_.tilesPerSecond," tiles per second ",n.a.createElement("br",null),_.tileOffsetY," tile",1===_.tileOffsetY?"":"s"," traversed")):n.a.createElement("div",{className:"GameOver__text"},n.a.createElement("div",{className:"GameOver__first mt5 tc f3-ns f4 b"},"Failure",n.a.createElement("br",null)," Better luck next time"),n.a.createElement("div",{className:"GameOver__score mt3 tc f4-ns f5"},"You survived ",g.elapsed,"s ",n.a.createElement("br",null),"and traversed ",_.tileOffsetY," tile",1===_.tileOffsetY?"":"s")),n.a.createElement(M,{retry:!0,style:{marginTop:"2rem"}}),n.a.createElement(M,{style:{marginTop:"0.5rem"}}))},R=function(){function e(){Object(c.a)(this,e),this.currentMenu="home"}return Object(o.a)(e,[{key:"renderMenu",get:function(){switch(this.currentMenu){case"play":return n.a.createElement(Y,null);case"options":return n.a.createElement(F,null);case"about":return n.a.createElement(W,null);case"scores":return n.a.createElement(U,null);case"statistics":return n.a.createElement(G,null);case"gameover":return n.a.createElement(B,null);default:return n.a.createElement(f,null)}}}]),e}();Object(m.g)(R,{currentMenu:m.l,renderMenu:m.d});var J=window.menuStore=new R,K=Object(l.a)(function(){return n.a.createElement("div",{className:"App vw-100 vh-100 flex justify-center items-center"},J.renderMenu)});a(20);r.a.render(n.a.createElement(K,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.0ab8d37b.chunk.js.map